'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _pundleApi = require('pundle-api');

exports.default = (0, _pundleApi.createLoader)(function (config, file) {
  if (!(0, _pundleApi.shouldProcess)(this.config.rootDirectory, file.filePath, config)) {
    return null;
  }

  var parsed = void 0;
  try {
    parsed = JSON.parse(file.contents);
  } catch (_) {
    throw new _pundleApi.MessageIssue('Malformed JSON found at \'' + file.filePath + '\'', 'error');
  }

  return {
    imports: [],
    sourceMap: {
      version: 3,
      sources: [file.filePath],
      names: ['$'],
      mappings: 'AAAAA'
    },
    contents: 'module.exports = ' + JSON.stringify(parsed)
  };
}, {
  extensions: ['json']
});